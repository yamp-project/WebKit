<!-- webkit-test-runner [ useEphemeralSession=true ] -->
<script>
  if (window.testRunner) {
    testRunner.dumpAsText();
    testRunner.waitUntilDone();
  }
  onload = () => {
    for (let i = 0; i <= 5; i++) {
      if (5 == i) {
        if (window.testRunner)
          testRunner.notifyDone();
      }
      let w = new Worker('empty-post-message-service-workers-crash.js');
      w.onmessage = () => {
        w.postMessage(undefined);
      };
      w.postMessage(undefined);
    }
  };
</script>
<html>
  <body>
    <p>PASS if no crash</p>
  </body>
</html>
